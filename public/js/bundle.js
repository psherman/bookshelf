webpackJsonp([0],{0:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var r=a(1),u=n(r),l=a(29),o=n(l),c=a(161),s=a(174),d=a(237),i=a(249),f=n(i),m=a(305),h=n(m),p=a(307),v=n(p);a(308);var E=function(e){var t=(0,c.combineReducers)(Object.assign({},h["default"])),a=(0,c.createStore)(t,e);o["default"].render(u["default"].createElement(d.Provider,{store:a},u["default"].createElement("div",null,u["default"].createElement(s.Router,{history:s.hashHistory,routes:f["default"]}))),document.querySelector("main"))};(0,v["default"])("data/books.json").then(function(e){"string"==typeof e&&(e=JSON.parse(e)),E({books:e.books})})["catch"](function(e){console.error("Failed to load books: "+e)})},249:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(250),u=n(r),l=a(260),o=n(l),c=a(286),s=n(c),d=a(292),i=n(d),f=a(298),m=n(f),h=a(299),p=n(h),v=a(300),E=n(v),g=a(303),_=n(g),y=a(304),b=n(y);t["default"]=[{path:"/",component:u["default"],indexRoute:{component:o["default"]},childRoutes:[{path:"add",component:s["default"]},{path:"genres",component:i["default"]},{path:"genre/:genre",component:m["default"],childRoutes:[{path:"add",component:p["default"]}]},{path:"authors",component:E["default"]},{path:"author/:author",component:_["default"],childRoutes:[{path:"add",component:b["default"]}]}]}]},250:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){return l["default"].createElement("div",null,l["default"].createElement(c["default"],null),l["default"].createElement("div",{className:"main"},e.children),l["default"].createElement(d["default"],null))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var u=a(1),l=n(u),o=a(251),c=n(o),s=a(257),d=n(s)},251:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),u=n(r),l=a(174),o=a(252),c=n(o);a(253);var s=c["default"].map(function(e){return u["default"].createElement("li",{key:e.name,className:e.className})});t["default"]=u["default"].createClass({displayName:"TopBar",shouldComponentUpdate:function(e,t){return!1},render:function(){return u["default"].createElement("header",null,u["default"].createElement("ul",null,s),u["default"].createElement("div",{className:"title"},u["default"].createElement(l.IndexLink,{to:{pathname:"/"},title:"home"},"Bookshelf")),u["default"].createElement("div",{className:"subtitle"},"Track books that you have read."),u["default"].createElement("nav",null,u["default"].createElement(l.Link,{to:{pathname:"/"}},"Home"),u["default"].createElement(l.Link,{to:{pathname:"/genres"}},"Genres"),u["default"].createElement(l.Link,{to:{pathname:"/authors"}},"Authors")),u["default"].createElement("ul",null,s))}})},252:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=[{name:"adventure",className:"adventure"},{name:"children's",className:"childrens"},{name:"fantasy",className:"fantasy"},{name:"historical",className:"historical"},{name:"mystery",className:"mystery"},{name:"non-fiction",className:"non-fiction"},{name:"poetry",className:"poetry"},{name:"sci-fi",className:"sci-fi"},{name:"thriller",className:"thriller"},{name:"drama",className:"drama"}];t["default"]=a;t.genreMap=a.reduce(function(e,t){return e[t.name]=t,e},{})},253:function(e,t){},257:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){return l["default"].createElement("footer",null,"made by ",l["default"].createElement("a",{href:"http://www.pshrmn.com"},"pshrmn.com"))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var u=a(1),l=n(u);a(258)},258:function(e,t){},260:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=e.books;return l["default"].createElement("div",null,l["default"].createElement(s["default"],{books:t}),l["default"].createElement(i["default"],{books:t,addPath:"/add"}))}Object.defineProperty(t,"__esModule",{value:!0});var u=a(1),l=n(u),o=a(237),c=a(261),s=n(c),d=a(276),i=n(d);t["default"]=(0,o.connect)(function(e){return{books:e.books}})(r)},261:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=e.books;return c["default"].createElement("div",{className:"stats"},c["default"].createElement(u,{books:t}),c["default"].createElement(l,{books:t}))}function u(e){var t=e.books;if(0===t.length)return null;var a=(0,f.genresByCount)(t);return a.length<=1?null:c["default"].createElement("div",{className:"bars"},c["default"].createElement("h2",null,"Books per Genre"),c["default"].createElement(i["default"],{data:a,getX:function(e){return e.genre},getY:function(e){return e.count}}))}function l(e){var t=e.books;return 0===t.length?null:c["default"].createElement("div",{className:"authors"},c["default"].createElement("h2",null,"Most Read Authors"),c["default"].createElement("ol",null,(0,f.mostPopularAuthors)(t).map(function(e,t){return c["default"].createElement("li",{key:t},c["default"].createElement(s.Link,{to:{pathname:"/author/"+e.author}},e.author))})))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var o=a(1),c=n(o),s=a(174),d=a(262),i=n(d),f=a(273);a(252);a(274)},262:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=e.x,a=e.y,n=e.width,r=e.height,u=e.genre,l=e.count,o=d.genreMap[u];return c["default"].createElement("g",{className:"bar",transform:"translate("+t+", 0)"},c["default"].createElement("rect",{className:o.className,x:"0",y:a,width:n,height:r}),c["default"].createElement("text",{x:n/2,y:a-2},l))}function u(e){var t=e.values,a=e.scale,n=e.height,r=e.width,u=a.bandwidth()/2;return c["default"].createElement("g",{className:"axis x",transform:"translate(0,"+n+")"},c["default"].createElement("line",{x1:"0",x2:r}),c["default"].createElement("g",{className:"ticks"},t.map(function(e,t){return c["default"].createElement("g",{key:t,className:"tick",transform:"translate("+(a(e)+u)+",0)"},c["default"].createElement("line",{y2:"6",x2:"0"}),c["default"].createElement("text",{dy:"0.715em",y:"9",x:"0"},e))})))}function l(e){var t=e.scale,a=e.height;return c["default"].createElement("g",{className:"axis y"},c["default"].createElement("line",{y1:"0",y2:a}),c["default"].createElement("g",{className:"ticks"},t.ticks(5).map(function(e,a){return c["default"].createElement("g",{key:a,className:"tick",transform:"translate(0,"+t(e)+")"},c["default"].createElement("line",{x2:"-6",y2:"0"}),c["default"].createElement("text",{dx:"0.715em",y:"5",x:"-20"},e))})))}Object.defineProperty(t,"__esModule",{value:!0});var o=a(1),c=n(o),s=a(263),d=a(252);a(271),t["default"]=c["default"].createClass({displayName:"OrdinalBarChart",getDefaultProps:function(){return{height:100,margin:{top:15,right:15,bottom:25,left:30}}},render:function(){var e=this.props,t=e.height,a=e.margin,n=e.data,o=e.getX,d=e.getY,i=60*n.length;if(0===n.length)return null;var f=n.reduce(function(e,t){var a=d(t);return a>e?a:e},0),m=(0,s.linear)().domain([0,f]).range([t,0]).nice(),h=(0,s.band)().domain(n.map(function(e){return o(e)})).range([0,i]).padding(.1),p=n.map(function(e,a){var n=h(o(e)),u=d(e),l=m(u),s=h.bandwidth();return c["default"].createElement(r,{key:a,x:n,y:l,width:s,height:t-l,genre:e.genre})});return c["default"].createElement("svg",{width:a.left+i+a.right,height:a.top+t+a.bottom},c["default"].createElement("g",{transform:"translate("+a.left+","+a.top+")"},c["default"].createElement(u,{values:n.map(function(e){return o(e)}),scale:h,height:t,width:i}),c["default"].createElement(l,{scale:m,height:t}),p))}})},271:function(e,t){},273:function(e,t){"use strict";function a(e,t){return e.reduce(function(e,a){var n=a[t];return void 0!==e[n]?e[n]+=1:e[n]=1,e},{})}function n(e){var t=a(e,"genre");return Object.keys(t).map(function(e){return{genre:e,count:t[e]}})}function r(e){var t=a(e,"author");return Object.keys(t).map(function(e){return{author:e,count:t[e]}}).sort(function(e,t){return t.count-e.count}).slice(0,5)}Object.defineProperty(t,"__esModule",{value:!0}),t.genresByCount=n,t.mostPopularAuthors=r},274:function(e,t){},276:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=e.books,a=e.addPath;return o["default"].createElement("div",{className:"showcase"},o["default"].createElement("div",{className:"info"},t.length," Books",o["default"].createElement(m["default"],{books:t})),o["default"].createElement("div",{className:"books"},o["default"].createElement("div",{className:"book"},o["default"].createElement(i["default"],{classes:["add"],path:{pathname:a},title:"Add A Book"})),t.map(function(e,t){return o["default"].createElement(s["default"],u({key:t,index:t%10},e))})))}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t["default"]=r;var l=a(1),o=n(l),c=(a(174),a(277)),s=n(c),d=a(278),i=n(d),f=a(283),m=n(f);a(284)},277:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=e.title,a=e.author,n=e.genre,r=d.genreMap[n];return l["default"].createElement("div",{className:"book",title:t},l["default"].createElement(s["default"],{classes:[r.className],title:t}),l["default"].createElement("div",{className:"author"},l["default"].createElement(o.Link,{to:{pathname:"/author/"+a}},a)))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var u=a(1),l=n(u),o=a(174),c=a(278),s=n(c),d=a(252);a(281)},278:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=e.classes,a=void 0===t?[]:t,n=e.title,r=e.path,u=["cover"].concat(a),c=l["default"].createElement("div",{className:u.join(" ")},l["default"].createElement("div",{className:"title"},n));return void 0===r?c:l["default"].createElement(o.Link,{to:r},c)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var u=a(1),l=n(u),o=a(174);a(279)},279:function(e,t){},281:function(e,t){},283:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=e.books,a=t.length;return l["default"].createElement("div",{className:"genre-bar"},(0,o.genresByCount)(t).map(function(e){var t=c.genreMap[e.genre],n=e.count/a;return l["default"].createElement("div",{key:t.name,className:["genre",t.className].join(" "),style:{flexGrow:n},title:Math.floor(100*n)+"% of books are "+t.name})}))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var u=a(1),l=n(u),o=a(273),c=a(252)},284:function(e,t){},286:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){return l["default"].createElement(c["default"],null)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var u=a(1),l=n(u),o=a(287),c=n(o)},287:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),u=n(r),l=a(237),o=a(288),c=a(252),s=n(c);a(290);var d=u["default"].createClass({displayName:"BookForm",propTypes:{author:u["default"].PropTypes.string,genre:u["default"].PropTypes.string,next:u["default"].PropTypes.string},contextTypes:{router:u["default"].PropTypes.object},getInitialState:function(){return{title:"",author:"",genre:void 0}},validate:function(){return""!==this.state.title&&""!==this.state.author&&this.state.genre!==-1},save:function(e){e.preventDefault(),this.validate()&&(this.props.addBook({title:this.state.title,author:this.state.author,genre:this.state.genre}),this.context.router.push(this.props.next||"/"))},cancel:function(e){e.preventDefault(),this.context.router.push(this.props.next||"/")},changeTitle:function(e){this.setState({title:e.target.value})},changeAuthor:function(e){this.setState({author:e.target.value})},changeGenre:function(e){this.setState({genre:e.target.value})},componentWillMount:function(){var e=this.props,t=e.author,a=e.genre,n={},r=!1;void 0!==t&&(n.author=t,r=!0),void 0!==a&&(n.genre=a,r=!0),r&&this.setState(n)},render:function(){var e=this,t=this.props,a=t.author,n=t.genre,r=void 0!==a?this.props.author:u["default"].createElement("input",{type:"text",value:this.state.author,onChange:this.changeAuthor}),l=void 0!==n?u["default"].createElement("p",null,this.props.genre):u["default"].createElement("div",{className:"genre-options"},s["default"].map(function(t,a){return u["default"].createElement("label",{key:a},u["default"].createElement("input",{type:"radio",value:t.name,name:"genre",onChange:e.changeGenre}),t.name)}));return u["default"].createElement("form",{onSubmit:this.save},u["default"].createElement("p",null,"Title:"),u["default"].createElement("p",null,u["default"].createElement("input",{type:"text",value:this.state.title,onChange:this.changeTitle})),u["default"].createElement("div",null,u["default"].createElement("p",null,"Author(s):"),u["default"].createElement("p",null,r)),u["default"].createElement("div",null,"Genre:",l),u["default"].createElement("button",null,"Save"),u["default"].createElement("button",{onClick:this.cancel,type:"button"},"Cancel"))}});t["default"]=(0,l.connect)(null,{addBook:o.addBook})(d)},288:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function r(e){return{type:l.ADD_BOOK,book:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.addBook=r;var u=a(289),l=n(u)},289:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ADD_BOOK="ADD_BOOK"},290:function(e,t){},292:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=f["default"].map(function(e,t){return l["default"].createElement("li",{key:t},l["default"].createElement(d["default"],{title:e.name,classes:[e.className],path:{pathname:"/genre/"+e.name}}))});return l["default"].createElement("div",null,h,l["default"].createElement("h1",null,"Genres"),l["default"].createElement("ul",{className:"genres"},t))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var u=a(1),l=n(u),o=(a(237),a(293)),c=n(o),s=a(278),d=n(s),i=a(252),f=n(i);a(296);var m=[{to:{pathname:"/"},title:"Home"}],h=l["default"].createElement(c["default"],{paths:m})},293:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){return l["default"].createElement("div",{className:"breadcrumbs"},e.paths.map(function(e,t){return l["default"].createElement(o.Link,{key:t,to:e.to},e.title)}))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var u=a(1),l=n(u),o=a(174);a(294)},294:function(e,t){},296:function(e,t){},298:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=e.genre,a=e.books,n=e.children;return l["default"].createElement("div",{className:"genre-page"},p,l["default"].createElement("h1",null,t," Books"),n?l["default"].createElement("div",{className:"children"},n):null,l["default"].createElement(s["default"],{books:a}),l["default"].createElement(i["default"],{books:a,addPath:"/genre/"+t+"/add"}))}Object.defineProperty(t,"__esModule",{value:!0});var u=a(1),l=n(u),o=a(237),c=(a(174),a(261)),s=n(c),d=a(276),i=n(d),f=a(293),m=n(f),h=[{to:{pathname:"/"},title:"Home"},{to:{pathname:"/genres"},title:"Genres"}],p=l["default"].createElement(m["default"],{paths:h});t["default"]=(0,o.connect)(function(e,t){var a=t.params.genre;return{genre:a,books:e.books.filter(function(e){return e.genre===a})}})(r)},299:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=e.params.genre;return l["default"].createElement(c["default"],{genre:t,next:"/genre/"+t})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var u=a(1),l=n(u),o=a(287),c=n(o)},300:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=e.authors.map(function(e){var t=e.name,a=e.genre;return l["default"].createElement("li",{key:t},l["default"].createElement(i["default"],{title:t,classes:[a.className],path:{pathname:"/author/"+t}}))});return l["default"].createElement("div",null,h,l["default"].createElement("h1",null,"Authors"),l["default"].createElement("ul",{className:"authors"},t))}Object.defineProperty(t,"__esModule",{value:!0});var u=a(1),l=n(u),o=a(237),c=(a(174),a(293)),s=n(c),d=a(278),i=n(d),f=a(252);a(301);var m=[{to:{pathname:"/"},title:"Home"}],h=l["default"].createElement(s["default"],{paths:m});r.propTypes={authors:l["default"].PropTypes.array.isRequired},t["default"]=(0,o.connect)(function(e){var t=e.books.reduce(function(e,t){var a=t.author;return e[a]?e[a].books+=1:e[a]={genre:f.genreMap[t.genre],books:1},e},{}),a=Object.keys(t).map(function(e){return{name:e,books:t[e].books,genre:t[e].genre}}).sort(function(e,t){return t.books-e.books});return{authors:a}})(r)},301:function(e,t){},303:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=e.author,a=e.books,n=e.children;return l["default"].createElement("div",null,m,l["default"].createElement("h1",null,t),n?l["default"].createElement("div",{className:"children"},n):null,l["default"].createElement(s["default"],{books:a,addPath:"/author/"+t+"/add"}))}Object.defineProperty(t,"__esModule",{value:!0});var u=a(1),l=n(u),o=a(237),c=a(276),s=n(c),d=a(293),i=n(d),f=[{to:{pathname:"/"},title:"Home"},{to:{pathname:"/authors"},title:"Authors"}],m=l["default"].createElement(i["default"],{paths:f});t["default"]=(0,o.connect)(function(e,t){var a=t.params.author;return{author:a,books:e.books.filter(function(e){return e.author===a})}})(r)},304:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=e.params.author;return l["default"].createElement(c["default"],{author:t,next:"/author/"+t})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var u=a(1),l=n(u),o=a(287),c=n(o)},305:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(306),u=n(r);t["default"]={books:u["default"]}},306:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],t=arguments[1];switch(t.type){case l.ADD_BOOK:return[t.book].concat(r(e.slice()));default:return e}};var u=a(289),l=n(u)},307:function(e,t){"use strict";function a(e){return new Promise(function(t,a){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="json",n.onload=function(){200===n.status?t(n.response):a(Error("Failed to load books from url "+e))},n.onerror=function(){a(Error("Network error loading "+e))},n.send()})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a},308:function(e,t){}});